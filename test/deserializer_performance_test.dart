import 'dart:typed_data';

import 'package:benchmark_harness/benchmark_harness.dart';
import 'package:pro_mpack/pro_mpack.dart';

final bytes = Uint8List.fromList([
  135, 164, 116, 121, 112, 101, 168, 85, 115, 101, 114, 32, 226, 128, 162,
  162, //
  105, 100, 1, 164, 110, 97, 109, 101, 168, 74, 111, 104, 110, 32, 68, 111,
  101, //
  163, 97, 103, 101, 30, 165, 101, 109, 97, 105, 108, 181, 116, 104, 105,
  115, //
  46, 97, 110, 100, 114, 101, 121, 64, 103, 109, 97, 105, 108, 46, 99, 111,
  109, //
  169, 97, 100, 100, 114, 101, 115, 115, 101, 115, 147, 131, 164, 116, 121,
  112, //
  101, 167, 65, 100, 100, 114, 101, 115, 115, 162, 105, 100, 1, 166, 115,
  116, //
  114, 101, 101, 116, 174, 83, 104, 101, 118, 99, 104, 101, 110, 107, 111,
  32, //
  49, 50, 52, 131, 164, 116, 121, 112, 101, 167, 65, 100, 100, 114, 101, 115, //
  115, 162, 105, 100, 2, 166, 115, 116, 114, 101, 101, 116, 174, 83, 104,
  101, //
  118, 99, 104, 101, 110, 107, 111, 32, 49, 53, 52, 131, 164, 116, 121, 112, //
  101, 167, 65, 100, 100, 114, 101, 115, 115, 162, 105, 100, 3, 166, 115,
  116, //
  114, 101, 101, 116, 174, 83, 104, 101, 118, 99, 104, 101, 110, 107, 111,
  32, //
  49, 53, 52, 164, 108, 105, 115, 116, 154, 1, 2, 3, 4, 5, 6, 7, 8, 8, 10, //
]);

class DeserializerBenchmark extends BenchmarkBase {
  DeserializerBenchmark() : super('mpack - deserialize');

  @override
  void run() {
    final _ = deserialize(bytes);
  }

  @override
  void exercise() => run();

  @override
  void setup() {}

  @override
  void teardown() {
    // Clean up any resources here
  }
}

void main() {
  DeserializerBenchmark().report();
}
